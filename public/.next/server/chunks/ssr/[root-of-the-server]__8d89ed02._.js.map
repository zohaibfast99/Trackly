{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/lib/schema.ts"],"sourcesContent":["import {z} from \"zod\"\r\n\r\nexport const userSchema = z.object({\r\n    name:z.string().min(2, \"Name is required\").max(50, \"Maximum is 50 characters\"),\r\n    about: z.string().optional(),\r\n    country: z.string().min(1, \"Country is required\"),\r\n    industryType: z.string().min(1, \"Industry type is required\"),\r\n    //email: z.string().email(\"Invalid email address\"),\r\n    email: z.email(\"Invalid email address\"),\r\n    role: z.string().min(1, \"Role is required\"),\r\n    image: z.string().optional(),\r\n})\r\n\r\nexport const workspaceSchema = z.object({\r\n    name:z\r\n    .string()\r\n    .min(2, \"Name is required\")\r\n    .max(50, \"Maximum is 50 characters\"),\r\n    description: z.string().optional(),\r\n})\r\n\r\nexport const projectSchema = z.object({\r\n    name:z\r\n    .string()\r\n    .min(3,{message:\"Project name must be at least 3 characters.\"}),\r\n    description: z.string().optional(),\r\n    workspaceId: z.string(),\r\n    memberAccess: z.array(z.string()).optional(),\r\n})\r\nexport const taskFormSchema = z.object({\r\n    title: z.string().min(1, \"Title is Required\"),\r\n    description: z.string().optional(),\r\n    assigneeId: z.string().optional(),\r\n    status: z.enum([\r\n        \"TODO\",\r\n        \"IN_PROGRESS\",\r\n        \"COMPLETED\",\r\n        \"BLOCKED\",\r\n        \"BACKLOG\",\r\n        \"IN_REVIEW\",\r\n    ]),\r\n    dueDate:z.date(),\r\n    startDate:z.date(),\r\n    priority:z.enum([\"LOW\",\"MEDIUM\",\"HIGH\",\"CRITICAL\"]),\r\n    attachments:z\r\n    .array(\r\n        z.object({\r\n            name:z.string(),\r\n            url:z.string(),\r\n            type:z.enum([\"IMAGE\",\"PDF\"]),\r\n        })\r\n    )\r\n    .optional(),\r\n})"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,MAAM,aAAa,kLAAC,CAAC,MAAM,CAAC;IAC/B,MAAK,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,oBAAoB,GAAG,CAAC,IAAI;IACnD,OAAO,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAC1B,SAAS,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC3B,cAAc,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAChC,mDAAmD;IACnD,OAAO,kLAAC,CAAC,KAAK,CAAC;IACf,MAAM,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,kLAAC,CAAC,MAAM,GAAG,QAAQ;AAC9B;AAEO,MAAM,kBAAkB,kLAAC,CAAC,MAAM,CAAC;IACpC,MAAK,kLAAC,CACL,MAAM,GACN,GAAG,CAAC,GAAG,oBACP,GAAG,CAAC,IAAI;IACT,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ;AACpC;AAEO,MAAM,gBAAgB,kLAAC,CAAC,MAAM,CAAC;IAClC,MAAK,kLAAC,CACL,MAAM,GACN,GAAG,CAAC,GAAE;QAAC,SAAQ;IAA6C;IAC7D,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,aAAa,kLAAC,CAAC,MAAM;IACrB,cAAc,kLAAC,CAAC,KAAK,CAAC,kLAAC,CAAC,MAAM,IAAI,QAAQ;AAC9C;AACO,MAAM,iBAAiB,kLAAC,CAAC,MAAM,CAAC;IACnC,OAAO,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,YAAY,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAC/B,QAAQ,kLAAC,CAAC,IAAI,CAAC;QACX;QACA;QACA;QACA;QACA;QACA;KACH;IACD,SAAQ,kLAAC,CAAC,IAAI;IACd,WAAU,kLAAC,CAAC,IAAI;IAChB,UAAS,kLAAC,CAAC,IAAI,CAAC;QAAC;QAAM;QAAS;QAAO;KAAW;IAClD,aAAY,kLAAC,CACZ,KAAK,CACF,kLAAC,CAAC,MAAM,CAAC;QACL,MAAK,kLAAC,CAAC,MAAM;QACb,KAAI,kLAAC,CAAC,MAAM;QACZ,MAAK,kLAAC,CAAC,IAAI,CAAC;YAAC;YAAQ;SAAM;IAC/B,IAEH,QAAQ;AACb","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/app/actions/project.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { ProjectDataType } from \"@/components/project/create-project-form\"\r\nimport { userRequired } from \"../data/user/is-user-authenticated\"\r\nimport { db } from \"@/lib/db\"\r\nimport { projectSchema } from \"@/lib/schema\"\r\n\r\nexport const createNewProject = async (data: ProjectDataType) => {\r\n    const {user} = await  userRequired()\r\n\r\n    const workspace = await db.workspace.findUnique({\r\n        where:{id:data?.workspaceId},\r\n        include:{\r\n            projects:{select :{id:true}},\r\n        }\r\n    })\r\n\r\n    const validateData = projectSchema.parse(data)\r\n\r\n    const workspaceMemberMembers =await  db.workspaceMember.findMany({\r\n        where: {\r\n        \r\n            workspaceId: data.workspaceId,\r\n\r\n        }\r\n    })\r\n\r\n    const isUserMember = workspaceMemberMembers.some((member)=>member.userId=== user.id)\r\n    if(!isUserMember){\r\n        throw new Error(\"Unauthorized to create project in this workspace.\")\r\n    }\r\n    if(validateData.memberAccess?.length === 0){\r\n        validateData.memberAccess = [user.id];\r\n\r\n    }\r\n    else if(!validateData.memberAccess?.includes(user.id)){\r\n        validateData?.memberAccess?.push(user.id)\r\n    }\r\n\r\n    await db.project.create({\r\n        data:{\r\n            name:validateData.name,\r\n            description:validateData.description || \"\",\r\n            workspaceId:validateData.workspaceId,\r\n            projectAccess : {\r\n                create : validateData.memberAccess?.map((memberId)=>({\r\n                    workspaceMemberId : workspaceMemberMembers.find((member)=> member?.userId === memberId\r\n                )?.id!,\r\n                hasAccess:true,\r\n\r\n                }))\r\n            },\r\n            activities:{\r\n                create:{\r\n                    type:\"PROJECT_CREATED\",\r\n                    description:`created project ${validateData.name}`,\r\n                    userId:user.id,\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    return {success:true}\r\n};\r\n\r\n\r\nexport const postComments = async(workspaceId:string, \r\n    projectId:string,\r\n    content: string\r\n) => {\r\n    const {user} = await userRequired();\r\n\r\n    const isMember = await db.workspaceMember.findUnique({\r\n        where:{\r\n            userId_workspaceId:{\r\n                userId:user.id,\r\n                workspaceId,\r\n            },\r\n        },\r\n    });\r\n\r\n    if (!isMember){\r\n        throw new Error(\"You are not a member of this workspace\");\r\n    }\r\n\r\n    const projectAccess = await db.projectAccess.findUnique({\r\n        where:{\r\n            workspaceMemberId_projectId:{\r\n                workspaceMemberId: isMember.id,\r\n                projectId,\r\n            },\r\n        },\r\n    });\r\n    \r\n    if (!projectAccess){\r\n        throw new Error(\"You do not have access to this project\");\r\n    }\r\n\r\n    const comment = await db.comment.create({\r\n        data:{\r\n            content,\r\n            projectId,\r\n            userId: user.id,\r\n        },\r\n    });\r\n\r\n    return comment;\r\n}"],"names":[],"mappings":";;;;;;;AAGA;AACA;AACA;;;;;;AAEO,MAAM,mBAAmB,OAAO;IACnC,MAAM,EAAC,IAAI,EAAC,GAAG,MAAO,IAAA,kKAAY;IAElC,MAAM,YAAY,MAAM,+GAAE,CAAC,SAAS,CAAC,UAAU,CAAC;QAC5C,OAAM;YAAC,IAAG,MAAM;QAAW;QAC3B,SAAQ;YACJ,UAAS;gBAAC,QAAQ;oBAAC,IAAG;gBAAI;YAAC;QAC/B;IACJ;IAEA,MAAM,eAAe,8HAAa,CAAC,KAAK,CAAC;IAEzC,MAAM,yBAAwB,MAAO,+GAAE,CAAC,eAAe,CAAC,QAAQ,CAAC;QAC7D,OAAO;YAEH,aAAa,KAAK,WAAW;QAEjC;IACJ;IAEA,MAAM,eAAe,uBAAuB,IAAI,CAAC,CAAC,SAAS,OAAO,MAAM,KAAI,KAAK,EAAE;IACnF,IAAG,CAAC,cAAa;QACb,MAAM,IAAI,MAAM;IACpB;IACA,IAAG,aAAa,YAAY,EAAE,WAAW,GAAE;QACvC,aAAa,YAAY,GAAG;YAAC,KAAK,EAAE;SAAC;IAEzC,OACK,IAAG,CAAC,aAAa,YAAY,EAAE,SAAS,KAAK,EAAE,GAAE;QAClD,cAAc,cAAc,KAAK,KAAK,EAAE;IAC5C;IAEA,MAAM,+GAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACpB,MAAK;YACD,MAAK,aAAa,IAAI;YACtB,aAAY,aAAa,WAAW,IAAI;YACxC,aAAY,aAAa,WAAW;YACpC,eAAgB;gBACZ,QAAS,aAAa,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC;wBACjD,mBAAoB,uBAAuB,IAAI,CAAC,CAAC,SAAU,QAAQ,WAAW,WAC/E;wBACH,WAAU;oBAEV,CAAC;YACL;YACA,YAAW;gBACP,QAAO;oBACH,MAAK;oBACL,aAAY,CAAC,gBAAgB,EAAE,aAAa,IAAI,EAAE;oBAClD,QAAO,KAAK,EAAE;gBAClB;YACJ;QACJ;IACJ;IAEA,OAAO;QAAC,SAAQ;IAAI;AACxB;AAGO,MAAM,eAAe,OAAM,aAC9B,WACA;IAEA,MAAM,EAAC,IAAI,EAAC,GAAG,MAAM,IAAA,kKAAY;IAEjC,MAAM,WAAW,MAAM,+GAAE,CAAC,eAAe,CAAC,UAAU,CAAC;QACjD,OAAM;YACF,oBAAmB;gBACf,QAAO,KAAK,EAAE;gBACd;YACJ;QACJ;IACJ;IAEA,IAAI,CAAC,UAAS;QACV,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,gBAAgB,MAAM,+GAAE,CAAC,aAAa,CAAC,UAAU,CAAC;QACpD,OAAM;YACF,6BAA4B;gBACxB,mBAAmB,SAAS,EAAE;gBAC9B;YACJ;QACJ;IACJ;IAEA,IAAI,CAAC,eAAc;QACf,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,UAAU,MAAM,+GAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACpC,MAAK;YACD;YACA;YACA,QAAQ,KAAK,EAAE;QACnB;IACJ;IAEA,OAAO;AACX;;;IApGa;IA2DA;;AA3DA,+OAAA;AA2DA,+OAAA","debugId":null}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/utils/get-invite-code.ts"],"sourcesContent":["export const generateInviteCode = ()=> {\r\n    const characters = \r\n\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n    let inviteCode = \"\"\r\n\r\n    for(let i = 0; i<6 ; i++)\r\n    {\r\n        const randomIndex = Math.floor(Math.random()*characters.length)\r\n        inviteCode += characters[randomIndex]\r\n    }\r\n    return inviteCode\r\n}"],"names":[],"mappings":";;;;AAAO,MAAM,qBAAqB;IAC9B,MAAM,aAEN;IAEA,IAAI,aAAa;IAEjB,IAAI,IAAI,IAAI,GAAG,IAAE,GAAI,IACrB;QACI,MAAM,cAAc,KAAK,KAAK,CAAC,KAAK,MAAM,KAAG,WAAW,MAAM;QAC9D,cAAc,UAAU,CAAC,YAAY;IACzC;IACA,OAAO;AACX","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/app/actions/workspace.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { cons } from './../../node_modules/effect/src/List';\r\n\r\n\r\nimport { CreateWorkspaceDataType } from \"@/components/workspace/create-workspace-form\"\r\nimport { userRequired } from \"../data/user/is-user-authenticated\"\r\nimport { workspaceSchema } from \"@/lib/schema\"\r\nimport { db } from \"@/lib/db\"\r\nimport { generateInviteCode } from \"@/utils/get-invite-code\"\r\nimport { AccessLevel } from '@prisma/client';\r\nimport { redirect } from 'next/navigation'; \r\n\r\n\r\nexport const createNewWorkspace = async(data : CreateWorkspaceDataType) => {\r\n    try{\r\n    const {user} = await userRequired()\r\n\r\n    const validatedData = workspaceSchema.parse(data)\r\n\r\n    const res = await db.workspace.create({\r\n        data:{\r\n            name: validatedData.name,\r\n            description : validatedData.description,\r\n            ownerId : user.id,\r\n            inviteCode: generateInviteCode(),\r\n            members : {\r\n                create : {\r\n                    userId : user.id,\r\n                    accessLevel : \"OWNER\"\r\n                }\r\n            }\r\n        }\r\n    })\r\n    return {data:res};\r\n    }\r\n    catch(err){\r\n        console.log(err)\r\n        return {\r\n            status: 500,\r\n            message : \"An error occured while creating the workspace\"\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport const updateWorkspace = async (\r\n  workspaceId: string,\r\n  data:CreateWorkspaceDataType\r\n) => {\r\n  const { user } = await userRequired();\r\n\r\n  const validatedData = workspaceSchema.parse(data);\r\n\r\n  const isUserAMember = await db.workspaceMember.findUnique({\r\n    where: {\r\n      userId_workspaceId: {\r\n        userId: user.id,\r\n        workspaceId: workspaceId,\r\n      },\r\n    },\r\n  });\r\n\r\n  if (!isUserAMember) {\r\n    throw new Error(\"You are not a member of this workspace.\");\r\n  }\r\n\r\n  await db.workspace.update({\r\n    where: { id: workspaceId },\r\n    data: {\r\n      name: validatedData.name,\r\n      description: validatedData.description || \"\",\r\n    },\r\n  });\r\n\r\n  return { success: true };\r\n};\r\n\r\n\r\nexport const resetWorkspaceInviteCode = async (workspaceId: string) => {\r\n  const { user } = await userRequired();\r\n\r\n  const isUserAMember = await db.workspaceMember.findUnique({\r\n    where: {\r\n      userId_workspaceId: {\r\n        userId: user.id,\r\n        workspaceId: workspaceId,\r\n      },\r\n    },\r\n  });\r\n\r\n  if (!isUserAMember) {\r\n    throw new Error(\"You are not a member of this workspace.\");\r\n  }\r\n\r\n  await db.workspace.update({\r\n    where: { id: workspaceId },\r\n    data: {\r\n      inviteCode: generateInviteCode(),\r\n    },\r\n  });\r\n};\r\n\r\n\r\nexport const deleteWorkspace = async (workspaceId: string) => {\r\n  const { user } = await userRequired();\r\n\r\n  const isUserAMember = await db.workspaceMember.findUnique({\r\n    where: {\r\n      userId_workspaceId: {\r\n        userId: user.id,\r\n        workspaceId: workspaceId,\r\n      },\r\n    },\r\n  });\r\n\r\n  if (!isUserAMember) {\r\n    throw new Error(\"You are not a member of this workspace.\");\r\n  }\r\n\r\n  if (isUserAMember && isUserAMember.accessLevel !== AccessLevel.OWNER)\r\n  {\r\n    throw new Error(\"only an owner can delete the workspace\");\r\n  }\r\n\r\n  await db.workspace.delete({\r\n    where: { id: workspaceId },\r\n   \r\n  });\r\n\r\n  redirect(\"/workspace\");\r\n};\r\n\r\nexport const getWorkspaceStats = async (workspaceId: string) => {\r\n  try {\r\n    const { user } = await userRequired();\r\n\r\n    // Check if user is a member of the workspace\r\n    const isUserAMember = await db.workspaceMember.findUnique({\r\n      where: {\r\n        userId_workspaceId: {\r\n          userId: user.id,\r\n          workspaceId: workspaceId,\r\n        },\r\n      },\r\n    });\r\n\r\n    if (!isUserAMember) {\r\n      throw new Error(\"You are not a member of this workspace.\");\r\n    }\r\n\r\n    // Get task stats\r\n    const taskStats = await db.task.groupBy({\r\n      by: ['status'],\r\n      where: {\r\n        project: {\r\n          workspaceId: workspaceId,\r\n        },\r\n      },\r\n      _count: {\r\n        id: true,\r\n      },\r\n    });\r\n\r\n    // Get total tasks\r\n    const totalTasks = await db.task.count({\r\n      where: {\r\n        project: {\r\n          workspaceId: workspaceId,\r\n        },\r\n      },\r\n    });\r\n\r\n    // Get total members\r\n    const totalMembers = await db.workspaceMember.count({\r\n      where: { workspaceId },\r\n    });\r\n\r\n    // Get total projects\r\n    const totalProjects = await db.project.count({\r\n      where: { workspaceId },\r\n    });\r\n\r\n    // Get overdue tasks\r\n    const tasksOverdue = await db.task.count({\r\n      where: {\r\n        project: {\r\n          workspaceId: workspaceId,\r\n        },\r\n        dueDate: {\r\n          lt: new Date(),\r\n        },\r\n        status: {\r\n          notIn: ['COMPLETED'],\r\n        },\r\n      },\r\n    });\r\n\r\n    // Process task stats\r\n    const statsMap = taskStats.reduce((acc, stat) => {\r\n      acc[stat.status] = stat._count.id;\r\n      return acc;\r\n    }, {} as Record<string, number>);\r\n\r\n    const stats = {\r\n      totalTasks,\r\n      completedTasks: statsMap['COMPLETED'] || 0,\r\n      inProgressTasks: statsMap['IN_PROGRESS'] || 0,\r\n      todoTasks: statsMap['TODO'] || 0,\r\n      backlogTasks: statsMap['BACKLOG'] || 0,\r\n      totalMembers,\r\n      totalProjects,\r\n      tasksOverdue,\r\n    };\r\n\r\n    return {\r\n      success: true,\r\n      data: stats,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error fetching workspace stats:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to fetch workspace stats',\r\n    };\r\n  }\r\n};\r\n\r\nexport const getRecentTasks = async (workspaceId: string, limit: number = 5) => {\r\n  try {\r\n    const { user } = await userRequired();\r\n\r\n    // Check if user is a member of the workspace\r\n    const isUserAMember = await db.workspaceMember.findUnique({\r\n      where: {\r\n        userId_workspaceId: {\r\n          userId: user.id,\r\n          workspaceId: workspaceId,\r\n        },\r\n      },\r\n    });\r\n\r\n    if (!isUserAMember) {\r\n      throw new Error(\"You are not a member of this workspace.\");\r\n    }\r\n\r\n    const recentTasks = await db.task.findMany({\r\n      where: {\r\n        project: {\r\n          workspaceId: workspaceId,\r\n        },\r\n      },\r\n      orderBy: { updatedAt: 'desc' },\r\n      take: limit,\r\n      include: {\r\n        project: {\r\n          select: {\r\n            name: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    return {\r\n      success: true,\r\n      data: recentTasks,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error fetching recent tasks:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to fetch recent tasks',\r\n      data: [],\r\n    };\r\n  }\r\n};\r\n\r\nexport const getWorkspaceInfo = async (workspaceId: string) => {\r\n  try {\r\n    const { user } = await userRequired();\r\n\r\n    // Check if user is a member of the workspace\r\n    const isUserAMember = await db.workspaceMember.findUnique({\r\n      where: {\r\n        userId_workspaceId: {\r\n          userId: user.id,\r\n          workspaceId: workspaceId,\r\n        },\r\n      },\r\n    });\r\n\r\n    if (!isUserAMember) {\r\n      throw new Error(\"You are not a member of this workspace.\");\r\n    }\r\n\r\n    const workspace = await db.workspace.findUnique({\r\n      where: { id: workspaceId },\r\n      select: {\r\n        id: true,\r\n        name: true,\r\n        description: true,\r\n        ownerId: true,\r\n      },\r\n    });\r\n\r\n    if (!workspace) {\r\n      throw new Error(\"Workspace not found.\");\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      data: workspace,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error fetching workspace info:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to fetch workspace info',\r\n    };\r\n  }\r\n};\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 547, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/app/data/workspace/get-workspace.ts"],"sourcesContent":["import { db } from \"@/lib/db\";\r\nimport { userRequired } from \"../user/is-user-authenticated\";\r\n\r\nexport const getWorkspaceById = async (workspaceId: string) => {\r\n  const { user } = await userRequired();\r\n\r\n  const isUserMember = await db.workspaceMember.findUnique({\r\n    where: {\r\n      userId_workspaceId: {\r\n        userId: user.id,\r\n        workspaceId,\r\n      },\r\n    },\r\n  });\r\n\r\n  if (!isUserMember) {\r\n    throw new Error(\"Unauthorized access\");\r\n  }\r\n\r\n  const workspace = await db.workspace.findUnique({\r\n    where: { id: workspaceId },\r\n    include: {\r\n      members: { select: { userId: true, accessLevel: true } },\r\n    },\r\n  });\r\n\r\n  return { data: workspace };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,MAAM,mBAAmB,OAAO;IACrC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAA,kKAAY;IAEnC,MAAM,eAAe,MAAM,+GAAE,CAAC,eAAe,CAAC,UAAU,CAAC;QACvD,OAAO;YACL,oBAAoB;gBAClB,QAAQ,KAAK,EAAE;gBACf;YACF;QACF;IACF;IAEA,IAAI,CAAC,cAAc;QACjB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,YAAY,MAAM,+GAAE,CAAC,SAAS,CAAC,UAAU,CAAC;QAC9C,OAAO;YAAE,IAAI;QAAY;QACzB,SAAS;YACP,SAAS;gBAAE,QAAQ;oBAAE,QAAQ;oBAAM,aAAa;gBAAK;YAAE;QACzD;IACF;IAEA,OAAO;QAAE,MAAM;IAAU;AAC3B","debugId":null}},
    {"offset": {"line": 589, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/components/workspace/workspace-setting-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const WorkspaceSettingsForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call WorkspaceSettingsForm() from the server but WorkspaceSettingsForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/workspace/workspace-setting-form.tsx <module evaluation>\",\n    \"WorkspaceSettingsForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,wBAAwB,IAAA,wQAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,iFACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 603, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/components/workspace/workspace-setting-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const WorkspaceSettingsForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call WorkspaceSettingsForm() from the server but WorkspaceSettingsForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/workspace/workspace-setting-form.tsx\",\n    \"WorkspaceSettingsForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,wBAAwB,IAAA,wQAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,6DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 617, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 625, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/app/%28protected%29/workspace/%5BworkspaceId%5D/settings/page.tsx"],"sourcesContent":["import { getWorkspaceById } from \"@/app/data/workspace/get-workspace\";\r\nimport { WorkspaceSettingsForm } from \"@/components/workspace/workspace-setting-form\";\r\nimport React from \"react\";\r\n\r\nconst WorkspaceSettings = async ({\r\n  params,\r\n}: {\r\n  params: Promise<{ workspaceId: string }>;\r\n}) => {\r\n  const { workspaceId } = await params;\r\n\r\n  const { data } = await getWorkspaceById(workspaceId);\r\n  return (\r\n    <div>\r\n      <WorkspaceSettingsForm data={data as any} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkspaceSettings;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAGA,MAAM,oBAAoB,OAAO,EAC/B,MAAM,EAGP;IACC,MAAM,EAAE,WAAW,EAAE,GAAG,MAAM;IAE9B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAA,gKAAgB,EAAC;IACxC,qBACE,8OAAC;kBACC,cAAA,8OAAC,iLAAqB;YAAC,MAAM;;;;;;;;;;;AAGnC;uCAEe","debugId":null}}]
}