module.exports=[66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},29173,(a,b,c)=>{b.exports=a.x("@prisma/client",()=>require("@prisma/client"))},92920,66879,a=>{"use strict";a.s(["userRequired",()=>g],92920),a.i(75632);var b=a.i(99399);a.i(70396);var c=a.i(73727);a.s(["db",()=>e],66879);var d=a.i(29173);let e=globalThis.prisma||new d.PrismaClient,f=async()=>{let{getUser:a}=(0,b.getKindeServerSession)(),c=await a();if(!c)return null;let d=await e.user.findUnique({where:{id:c.id}});if(!d)return console.log("syncUser: user not found in DB, skipping."),c;let f=c.picture&&!c.picture.includes("gravatar.com")?c.picture:null;return d.image!==f&&(await e.user.update({where:{id:c.id},data:{image:f}}),console.log("syncUser: updated image for",c.id)),c},g=async()=>{try{let{isAuthenticated:a,getUser:d}=(0,b.getKindeServerSession)(),e=await a();return e||(0,c.redirect)("/api/auth/login"),{user:await f(),isUserAuthenticated:e}}catch(a){console.error("Error in userRequired:",a),(0,c.redirect)("/api/auth/login")}}},77872,a=>{"use strict";a.s(["getUserWorkspaces",()=>d]);var b=a.i(66879),c=a.i(92920);let d=async()=>{try{let{user:a}=await (0,c.userRequired)();return{data:await b.db.user.findUnique({where:{id:a.id},include:{workspaces:{select:{id:!0,userId:!0,workspaceId:!0,accessLevel:!0,createdAt:!0,workspace:{select:{name:!0}}}}}})}}catch(a){return console.log(a),{success:!1,error:!0,message:"Failed to fetch workspaces",status:500}}}},43917,a=>{"use strict";a.s(["Button",()=>l],43917);var b=a.i(7997),c=a.i(717);function d(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}var e=function(a){let e=function(a){let b=c.forwardRef((a,b)=>{let{children:e,...f}=a;if(c.isValidElement(e)){var g;let a,h,i=(g=e,(h=(a=Object.getOwnPropertyDescriptor(g.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.ref:(h=(a=Object.getOwnPropertyDescriptor(g,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.props.ref:g.props.ref||g.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(f,e.props);return e.type!==c.Fragment&&(j.ref=b?function(...a){return b=>{let c=!1,e=a.map(a=>{let e=d(a,b);return c||"function"!=typeof e||(c=!0),e});if(c)return()=>{for(let b=0;b<e.length;b++){let c=e[b];"function"==typeof c?c():d(a[b],null)}}}}(b,i):i),c.cloneElement(e,j)}return c.Children.count(e)>1?c.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),f=c.forwardRef((a,d)=>{let{children:f,...h}=a,i=c.Children.toArray(f),j=i.find(g);if(j){let a=j.props.children,f=i.map(b=>b!==j?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(e,{...h,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,f):null})}return(0,b.jsx)(e,{...h,ref:d,children:f})});return f.displayName=`${a}.Slot`,f}("Slot"),f=Symbol("radix.slottable");function g(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===f}var h=a.i(96942);let i=(0,a.i(1269).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var j=a.i(82248);let k=(0,h.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-soft hover:shadow-medium",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-soft hover:shadow-medium",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-soft hover:shadow-medium",ghost:"hover:bg-accent hover:text-accent-foreground hover:shadow-soft",link:"text-primary underline-offset-4 hover:underline",gradient:"gradient-primary text-white hover:opacity-90 shadow-medium hover:shadow-large"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-11 rounded-lg px-8 text-base",icon:"h-10 w-10",xl:"h-12 rounded-lg px-10 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),l=c.forwardRef(({className:a,variant:c,size:d,asChild:f=!1,loading:g,children:h,disabled:l,...m},n)=>{let o=f?e:"button";return f?(0,b.jsx)(o,{className:(0,j.cn)(k({variant:c,size:d,className:a})),ref:n,disabled:l||g,...m,children:h}):(0,b.jsxs)(o,{className:(0,j.cn)(k({variant:c,size:d,className:a})),ref:n,disabled:l||g,...m,children:[g&&(0,b.jsx)(i,{className:"h-4 w-4 animate-spin"}),h]})});l.displayName="Button"},37770,a=>{"use strict";a.s([],37770),a.i(90354),a.i(45575),a.i(11491),a.i(7997),a.i(11492),a.i(15851)},92898,a=>{"use strict";a.s(["Avatar",()=>c,"AvatarFallback",()=>d,"AvatarImage",()=>e]);var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Avatar() from the server but Avatar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/avatar.tsx <module evaluation>","Avatar"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call AvatarFallback() from the server but AvatarFallback is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/avatar.tsx <module evaluation>","AvatarFallback"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call AvatarImage() from the server but AvatarImage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/avatar.tsx <module evaluation>","AvatarImage")},56973,a=>{"use strict";a.s(["Avatar",()=>c,"AvatarFallback",()=>d,"AvatarImage",()=>e]);var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Avatar() from the server but Avatar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/avatar.tsx","Avatar"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call AvatarFallback() from the server but AvatarFallback is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/avatar.tsx","AvatarFallback"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call AvatarImage() from the server but AvatarImage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/avatar.tsx","AvatarImage")},46184,a=>{"use strict";a.i(92898);var b=a.i(56973);a.n(b)},39876,a=>{"use strict";a.s(["ProfileAvatar",()=>e]);var b=a.i(7997),c=a.i(82248),d=a.i(46184);let e=({url:a,name:e,size:f="md",className:g,numOfChars:h=1})=>(0,b.jsxs)(d.Avatar,{className:(0,c.cn)("h-8 w-8 rounded-md","sm"===f&&"h-6 w-6","md"===f&&"h-8 w-8","lg"===f&&"h-10 w-10",g),children:[(0,b.jsx)(d.AvatarImage,{src:a||void 0,alt:"name"}),(0,b.jsx)(d.AvatarFallback,{className:"bg-blue-600 text-white",children:e.substring(0,h).toUpperCase()})]})},40088,a=>{"use strict";a.s(["Badge",()=>f]);var b=a.i(7997),c=a.i(96942),d=a.i(82248);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium smooth-transition focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80 shadow-soft",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80 shadow-soft",outline:"text-foreground border-border hover:bg-accent",success:"border-transparent bg-green-600 text-white hover:bg-green-700 shadow-soft",warning:"border-transparent bg-yellow-600 text-white hover:bg-yellow-700 shadow-soft",info:"border-transparent bg-blue-600 text-white hover:bg-blue-700 shadow-soft",OWNER:"bg-gradient-to-r from-pink-500 to-pink-600 text-white shadow-soft hover:from-pink-600 hover:to-pink-700",MEMBER:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-soft hover:from-blue-600 hover:to-blue-700",VIWER:"bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-soft hover:from-gray-600 hover:to-gray-700",TODO:"bg-gradient-to-r from-slate-500 to-slate-600 text-white shadow-soft hover:from-slate-600 hover:to-slate-700",IN_PROGRESS:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-soft hover:from-blue-600 hover:to-blue-700",BACKLOG:"bg-gradient-to-r from-gray-400 to-gray-500 text-white shadow-soft hover:from-gray-500 hover:to-gray-600",IN_REVIEW:"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-soft hover:from-purple-600 hover:to-purple-700",COMPLETED:"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-soft hover:from-green-600 hover:to-green-700",BLOCKED:"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-soft hover:from-red-600 hover:to-red-700",CRITICAL:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-soft hover:from-red-700 hover:to-red-800 animate-pulse",HIGH:"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-soft hover:from-orange-600 hover:to-orange-700",MEDIUM:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-soft hover:from-yellow-600 hover:to-yellow-700",LOW:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white shadow-soft hover:from-emerald-600 hover:to-emerald-700"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}},1269,a=>{"use strict";a.s(["default",()=>g],1269);var b=a.i(717);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g}},46630,a=>{"use strict";a.s(["getWorkspaceProjectsByWorkspaceId",()=>e]);var b=a.i(66879),c=a.i(92920),d=a.i(29173);let e=async a=>{try{let{user:e}=await (0,c.userRequired)(),f=await b.db.workspaceMember.findUnique({where:{userId_workspaceId:{userId:e.id,workspaceId:a}}});if(!f)throw Error("User is not a member of the workspace.");let g=f.accessLevel===d.AccessLevel.OWNER?{workspaceId:a}:{projectAccess:{some:{hasAccess:!0,workspaceMember:{userId:e.id,workspaceId:a}}}},[h,i]=await Promise.all([b.db.project.findMany({where:g,select:{name:!0,id:!0,workspaceId:!0,description:!0}}),b.db.workspaceMember.findMany({where:{workspaceId:a},include:{user:{select:{name:!0,id:!0,image:!0}}}})]);return{projects:h,workspaceMembers:i}}catch(a){return console.log(a),{success:!1,error:!0,message:"Internal server error"}}}},6730,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_@kinde_jwt-validator_dist_jsrsasign-B2gZIJhY_d6a1a2ae.js"].map(b=>a.l(b))).then(()=>b(20445)))},23804,a=>{a.v(a=>Promise.resolve().then(()=>a(5246)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__975ee918._.js.map