{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/lib/schema.ts"],"sourcesContent":["import {z} from \"zod\"\r\n\r\nexport const userSchema = z.object({\r\n    name:z.string().min(2, \"Name is required\").max(50, \"Maximum is 50 characters\"),\r\n    about: z.string().optional(),\r\n    country: z.string().min(1, \"Country is required\"),\r\n    industryType: z.string().min(1, \"Industry type is required\"),\r\n    //email: z.string().email(\"Invalid email address\"),\r\n    email: z.email(\"Invalid email address\"),\r\n    role: z.string().min(1, \"Role is required\"),\r\n    image: z.string().optional(),\r\n})\r\n\r\nexport const workspaceSchema = z.object({\r\n    name:z\r\n    .string()\r\n    .min(2, \"Name is required\")\r\n    .max(50, \"Maximum is 50 characters\"),\r\n    description: z.string().optional(),\r\n})\r\n\r\nexport const projectSchema = z.object({\r\n    name:z\r\n    .string()\r\n    .min(3,{message:\"Project name must be at least 3 characters.\"}),\r\n    description: z.string().optional(),\r\n    workspaceId: z.string(),\r\n    memberAccess: z.array(z.string()).optional(),\r\n})\r\nexport const taskFormSchema = z.object({\r\n    title: z.string().min(1, \"Title is Required\"),\r\n    description: z.string().optional(),\r\n    assigneeId: z.string().optional(),\r\n    status: z.enum([\r\n        \"TODO\",\r\n        \"IN_PROGRESS\",\r\n        \"COMPLETED\",\r\n        \"BLOCKED\",\r\n        \"BACKLOG\",\r\n        \"IN_REVIEW\",\r\n    ]),\r\n    dueDate:z.date(),\r\n    startDate:z.date(),\r\n    priority:z.enum([\"LOW\",\"MEDIUM\",\"HIGH\",\"CRITICAL\"]),\r\n    attachments:z\r\n    .array(\r\n        z.object({\r\n            name:z.string(),\r\n            url:z.string(),\r\n            type:z.enum([\"IMAGE\",\"PDF\"]),\r\n        })\r\n    )\r\n    .optional(),\r\n})"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,MAAM,aAAa,kLAAC,CAAC,MAAM,CAAC;IAC/B,MAAK,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,oBAAoB,GAAG,CAAC,IAAI;IACnD,OAAO,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAC1B,SAAS,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC3B,cAAc,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAChC,mDAAmD;IACnD,OAAO,kLAAC,CAAC,KAAK,CAAC;IACf,MAAM,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,kLAAC,CAAC,MAAM,GAAG,QAAQ;AAC9B;AAEO,MAAM,kBAAkB,kLAAC,CAAC,MAAM,CAAC;IACpC,MAAK,kLAAC,CACL,MAAM,GACN,GAAG,CAAC,GAAG,oBACP,GAAG,CAAC,IAAI;IACT,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ;AACpC;AAEO,MAAM,gBAAgB,kLAAC,CAAC,MAAM,CAAC;IAClC,MAAK,kLAAC,CACL,MAAM,GACN,GAAG,CAAC,GAAE;QAAC,SAAQ;IAA6C;IAC7D,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,aAAa,kLAAC,CAAC,MAAM;IACrB,cAAc,kLAAC,CAAC,KAAK,CAAC,kLAAC,CAAC,MAAM,IAAI,QAAQ;AAC9C;AACO,MAAM,iBAAiB,kLAAC,CAAC,MAAM,CAAC;IACnC,OAAO,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,aAAa,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,YAAY,kLAAC,CAAC,MAAM,GAAG,QAAQ;IAC/B,QAAQ,kLAAC,CAAC,IAAI,CAAC;QACX;QACA;QACA;QACA;QACA;QACA;KACH;IACD,SAAQ,kLAAC,CAAC,IAAI;IACd,WAAU,kLAAC,CAAC,IAAI;IAChB,UAAS,kLAAC,CAAC,IAAI,CAAC;QAAC;QAAM;QAAS;QAAO;KAAW;IAClD,aAAY,kLAAC,CACZ,KAAK,CACF,kLAAC,CAAC,MAAM,CAAC;QACL,MAAK,kLAAC,CAAC,MAAM;QACb,KAAI,kLAAC,CAAC,MAAM;QACZ,MAAK,kLAAC,CAAC,IAAI,CAAC;YAAC;YAAQ;SAAM;IAC/B,IAEH,QAAQ;AACb","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/app/actions/project.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { ProjectDataType } from \"@/components/project/create-project-form\"\r\nimport { userRequired } from \"../data/user/is-user-authenticated\"\r\nimport { db } from \"@/lib/db\"\r\nimport { projectSchema } from \"@/lib/schema\"\r\n\r\nexport const createNewProject = async (data: ProjectDataType) => {\r\n    const {user} = await  userRequired()\r\n\r\n    const workspace = await db.workspace.findUnique({\r\n        where:{id:data?.workspaceId},\r\n        include:{\r\n            projects:{select :{id:true}},\r\n        }\r\n    })\r\n\r\n    const validateData = projectSchema.parse(data)\r\n\r\n    const workspaceMemberMembers =await  db.workspaceMember.findMany({\r\n        where: {\r\n        \r\n            workspaceId: data.workspaceId,\r\n\r\n        }\r\n    })\r\n\r\n    const isUserMember = workspaceMemberMembers.some((member)=>member.userId=== user.id)\r\n    if(!isUserMember){\r\n        throw new Error(\"Unauthorized to create project in this workspace.\")\r\n    }\r\n    if(validateData.memberAccess?.length === 0){\r\n        validateData.memberAccess = [user.id];\r\n\r\n    }\r\n    else if(!validateData.memberAccess?.includes(user.id)){\r\n        validateData?.memberAccess?.push(user.id)\r\n    }\r\n\r\n    await db.project.create({\r\n        data:{\r\n            name:validateData.name,\r\n            description:validateData.description || \"\",\r\n            workspaceId:validateData.workspaceId,\r\n            projectAccess : {\r\n                create : validateData.memberAccess?.map((memberId)=>({\r\n                    workspaceMemberId : workspaceMemberMembers.find((member)=> member?.userId === memberId\r\n                )?.id!,\r\n                hasAccess:true,\r\n\r\n                }))\r\n            },\r\n            activities:{\r\n                create:{\r\n                    type:\"PROJECT_CREATED\",\r\n                    description:`created project ${validateData.name}`,\r\n                    userId:user.id,\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    return {success:true}\r\n};\r\n\r\n\r\nexport const postComments = async(workspaceId:string, \r\n    projectId:string,\r\n    content: string\r\n) => {\r\n    const {user} = await userRequired();\r\n\r\n    const isMember = await db.workspaceMember.findUnique({\r\n        where:{\r\n            userId_workspaceId:{\r\n                userId:user.id,\r\n                workspaceId,\r\n            },\r\n        },\r\n    });\r\n\r\n    if (!isMember){\r\n        throw new Error(\"You are not a member of this workspace\");\r\n    }\r\n\r\n    const projectAccess = await db.projectAccess.findUnique({\r\n        where:{\r\n            workspaceMemberId_projectId:{\r\n                workspaceMemberId: isMember.id,\r\n                projectId,\r\n            },\r\n        },\r\n    });\r\n    \r\n    if (!projectAccess){\r\n        throw new Error(\"You do not have access to this project\");\r\n    }\r\n\r\n    const comment = await db.comment.create({\r\n        data:{\r\n            content,\r\n            projectId,\r\n            userId: user.id,\r\n        },\r\n    });\r\n\r\n    return comment;\r\n}"],"names":[],"mappings":";;;;;;;AAGA;AACA;AACA;;;;;;AAEO,MAAM,mBAAmB,OAAO;IACnC,MAAM,EAAC,IAAI,EAAC,GAAG,MAAO,IAAA,kKAAY;IAElC,MAAM,YAAY,MAAM,+GAAE,CAAC,SAAS,CAAC,UAAU,CAAC;QAC5C,OAAM;YAAC,IAAG,MAAM;QAAW;QAC3B,SAAQ;YACJ,UAAS;gBAAC,QAAQ;oBAAC,IAAG;gBAAI;YAAC;QAC/B;IACJ;IAEA,MAAM,eAAe,8HAAa,CAAC,KAAK,CAAC;IAEzC,MAAM,yBAAwB,MAAO,+GAAE,CAAC,eAAe,CAAC,QAAQ,CAAC;QAC7D,OAAO;YAEH,aAAa,KAAK,WAAW;QAEjC;IACJ;IAEA,MAAM,eAAe,uBAAuB,IAAI,CAAC,CAAC,SAAS,OAAO,MAAM,KAAI,KAAK,EAAE;IACnF,IAAG,CAAC,cAAa;QACb,MAAM,IAAI,MAAM;IACpB;IACA,IAAG,aAAa,YAAY,EAAE,WAAW,GAAE;QACvC,aAAa,YAAY,GAAG;YAAC,KAAK,EAAE;SAAC;IAEzC,OACK,IAAG,CAAC,aAAa,YAAY,EAAE,SAAS,KAAK,EAAE,GAAE;QAClD,cAAc,cAAc,KAAK,KAAK,EAAE;IAC5C;IAEA,MAAM,+GAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACpB,MAAK;YACD,MAAK,aAAa,IAAI;YACtB,aAAY,aAAa,WAAW,IAAI;YACxC,aAAY,aAAa,WAAW;YACpC,eAAgB;gBACZ,QAAS,aAAa,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC;wBACjD,mBAAoB,uBAAuB,IAAI,CAAC,CAAC,SAAU,QAAQ,WAAW,WAC/E;wBACH,WAAU;oBAEV,CAAC;YACL;YACA,YAAW;gBACP,QAAO;oBACH,MAAK;oBACL,aAAY,CAAC,gBAAgB,EAAE,aAAa,IAAI,EAAE;oBAClD,QAAO,KAAK,EAAE;gBAClB;YACJ;QACJ;IACJ;IAEA,OAAO;QAAC,SAAQ;IAAI;AACxB;AAGO,MAAM,eAAe,OAAM,aAC9B,WACA;IAEA,MAAM,EAAC,IAAI,EAAC,GAAG,MAAM,IAAA,kKAAY;IAEjC,MAAM,WAAW,MAAM,+GAAE,CAAC,eAAe,CAAC,UAAU,CAAC;QACjD,OAAM;YACF,oBAAmB;gBACf,QAAO,KAAK,EAAE;gBACd;YACJ;QACJ;IACJ;IAEA,IAAI,CAAC,UAAS;QACV,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,gBAAgB,MAAM,+GAAE,CAAC,aAAa,CAAC,UAAU,CAAC;QACpD,OAAM;YACF,6BAA4B;gBACxB,mBAAmB,SAAS,EAAE;gBAC9B;YACJ;QACJ;IACJ;IAEA,IAAI,CAAC,eAAc;QACf,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,UAAU,MAAM,+GAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QACpC,MAAK;YACD;YACA;YACA,QAAQ,KAAK,EAAE;QACnB;IACJ;IAEA,OAAO;AACX;;;IApGa;IA2DA;;AA3DA,+OAAA;AA2DA,+OAAA","debugId":null}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///D:/840%20G3/7th%20semester/FSPM/Trackly/Trackly/app/%28protected%29/workspace/%5BworkspaceId%5D/page.tsx"],"sourcesContent":["import React from 'react'\r\n\r\nfunction page() {\r\n  return (\r\n    <div>\r\n      Page\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default page\r\n"],"names":[],"mappings":";;;;;;AAEA,SAAS;IACP,qBACE,8OAAC;kBAAI;;;;;;AAIT;uCAEe","debugId":null}}]
}